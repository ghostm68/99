<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marvel Series Viewer</title>
    <style>
        body {
            background-image: url('https://i.pinimg.com/originals/e5/53/46/e55346d539daeda80680794de7f29a93.gif'); /* Background image URL */
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: white;
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
        }
        form {
            text-align: center;
            margin: 20px auto;
        }
        #searchInput {
            padding: 10px;
            width: 300px;
            border: none;
        }
        #searchButton {
            padding: 10px 20px;
            background-color: #e62429; /* Marvel red */
            border: none;
            color: white;
            cursor: pointer;
        }
        #seriesContainer {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        iframe {
            border: none;
            margin: 10px;
        }
    </style>
</head>
<body>
    <h1>Marvel Series Viewer</h1>
    <form id="searchForm">
        <input type="text" id="searchInput" placeholder="Enter a search query">
        <input type="submit" id="searchButton" value="Search">
    </form>
    <div id="seriesContainer"></div>

    <script>
        // Marvel API keys
        const publicKey = 'eb535b51abdc399392bb68f63840e122';
        const privateKey = '7c466dfe68151a2bd36f9a52f855aba9f7be24af';

        // Function to generate the required hash
        function generateHash(timestamp) {
            const hashString = timestamp + privateKey + publicKey;
            return md5(hashString);
        }

        // Function to fetch and display Marvel series
        function displayMarvelSeries(query = '') {
            // Generate a timestamp
            const timestamp = new Date().getTime();

            // Generate the hash
            const hash = generateHash(timestamp);

            // Construct the full API URL with the search query if provided
            const apiUrl = query ? `https://gateway.marvel.com:443/v1/public/series?contains=comic%2Cmagazine%2Ctrade%20paperback%2Chardcover%2Cdigest%2Cgraphic%20novel%2Cdigital%20comic%2Cinfinite%20comic&orderBy=title&apikey=${publicKey}&ts=${timestamp}&hash=${hash}&titleStartsWith=${encodeURIComponent(query)}` : `https://gateway.marvel.com:443/v1/public/series?contains=comic%2Cmagazine%2Ctrade%20paperback%2Chardcover%2Cdigest%2Cgraphic%20novel%2Cdigital%20comic%2Cinfinite%20comic&orderBy=title&apikey=${publicKey}&ts=${timestamp}&hash=${hash}`;

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    // Check if data was retrieved successfully
                    if (data && data.data && data.data.results) {
                        // Clear previous results
                        const seriesContainer = document.getElementById('seriesContainer');
                        seriesContainer.innerHTML = '';

                        // Loop through the series data
                        for (const series of data.data.results) {
                            // Create an iframe for each series and set the src to the series URL
                            const iframeHtml = `<iframe src="${series.resourceURI}" width="400" height="600"></iframe>`;
                            seriesContainer.innerHTML += iframeHtml;
                        }
                    } else {
                        console.error('Error fetching Marvel series data');
                    }
                })
                .catch(error => {
                    console.error('Error fetching Marvel series data:', error);
                });
        }

        // Handle form submission
        document.getElementById('searchForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const searchQuery = document.getElementById('searchInput').value;
            displayMarvelSeries(searchQuery);
        });

        // Initial display of Marvel series (you can remove this if not needed)
        displayMarvelSeries();
    </script>
    <!-- ... Rest of the HTML and CSS ... -->

<div id="errorContainer"></div> <!-- Add a container for displaying errors -->

<script>
    // ...

    // Function to handle errors and display error messages
    function handleApiError(error) {
        const errorContainer = document.getElementById('errorContainer');
        errorContainer.innerHTML = `<p>Error: ${error.message}</p>`;
    }

    // Function to fetch and display Marvel series
    function displayMarvelSeries(query = '') {
        // ...

        fetch(apiUrl)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                // Check if data was retrieved successfully
                if (data && data.data && data.data.results) {
                    // Clear previous results and errors
                    const seriesContainer = document.getElementById('seriesContainer');
                    const errorContainer = document.getElementById('errorContainer');
                    seriesContainer.innerHTML = '';
                    errorContainer.innerHTML = '';

                    // Loop through the series data
                    for (const series of data.data.results) {
                        // Create an iframe for each series and set the src to the series URL
                        const iframeHtml = `<iframe src="${series.resourceURI}" width="400" height="600"></iframe>`;
                        seriesContainer.innerHTML += iframeHtml;
                    }
                } else {
                    // Display an error message if no results were found
                    handleApiError(new Error('No results found.'));
                }
            })
            .catch(error => {
                // Handle and display any errors that occur during the fetch
                handleApiError(error);
            });
    }

    // ...
</script>

</body>
</html>
